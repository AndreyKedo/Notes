# Klavio
- [Переменные и их методы](#переменные-и-их-методы)
- [Циклы](#циклы)
- [Условные операторы](#условные-операторы)
- [Массивы и их методы](#массивы-и-их-методы)
- [Форматирование](#форматирование)


Klavio использует Django (Python) в качестве *шаблонизатора* (англ. `template engine`).

## Переменные и их методы
- [Обращение к переменной](#обращение-к-переменной)
- [Использование встроенных методов](#использование-встроенных-методов)
- [Переменные со знаком `$` в названии](#переменные-со-знаком--в-названии)
- [Передача переменной значения по умолчанию](#передача-переменной-значения-по-умолчанию)

### Обращение к переменной

Обращение к переменной `foo`:
```hbs
{{ foo }}
```
Если использовать переменную в тексте:
```hbs
<span> Hello, {{ name }}! </span>
```

### Использование встроенных методов
Например, для применения метода с названием `method` с переменной `foo` используется следующий синтаксис:
```hbs
{{ foo|method }}
```
Если метод может принимать параметры, то вызов метода `method` с параметром `param` имеет вид:
```hbs
{{ foo|method:param }}
```
Если нужно применить к переменной `bar` последовательно два метода `method1` и `method2`, то
```hbs
{{ foo|method1:param1|method2:param2 }}
```

### Переменные со знаком `$` в названии
Если переменная из контекста имеет знак `$` в своём названии (например, `$value`), то к ней нельзя обратиться как к `{{ $value }}`, поскольку это приведёт к синтаксической ошибке.
Такие переменные нужно находить с помощью метода `lookup`, передавая ему в качестве параметра название переменной строкой:
```hbs
{{ event|lookup:'$value' }}
```

### Передача переменной значения по умолчанию
```hbs
<span> Hello, {{ name|default:'Sir' }}! </span>
```

## Циклы
В Django существует только один вид циклов: `for..in`. Циклы `foreach`, `while`, `for`, `do..while` отсутствуют.
### Цикл `for`
```django
<ul>
{% for unit in unit_list %}
    <li>{{ unit.name }} {{ unit.price }}</li>
{% endfor %}
</ul>
```

## Условные операторы
В Django существует только один вид условных операторов: `if..else`. Тернарный оператор `a ? b : c` отсуствует.

### Оператор if..else
```klaviyo
{% if unit_list and unit_list|length > 1 %}
    Number of units: {{ unit_list|length }}
{% elif unit_list|length == 1 %}
    There is only one unit left.
{% else %}
    There are no units.
{% endif %}
```


## Массивы и их методы
* `length` возвращает длину массива с названием `array` (также подходит для строк)
```hbs
{{ array|length }}
```
* `length_is` возвращает логическое значение `true/false`, если длина массива `array` совпадает с указанной (например, `3`)
```hbs
{{ array|length_is:"3" }}
```

## Форматирование
### Форматирование числа с плавающей точкой
* Приведение *числа с плавающей точкой* `float` к *точности* (англ. `precision`) до *двух знаков после запятой*  
(`7.3193 --> 7.32`, `6 --> 6.00`, `1.1 --> 1.10`, `3.0000000001 --> 3.00`):
```hbs
{{ event.float|floatformat:2 }}
```

### Форматирование даты
* Перевод даты `date` из формата `ISO` (например, `2022-02-16T21:57:21.323Z`) в *американский формат* `MM/DD/YYYY`:
```hbs
{{ event.date|format_date_string|date:'m/d/Y' }}
```

